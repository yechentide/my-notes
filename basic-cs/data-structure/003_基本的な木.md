# 基本的な木

## 木 (tree)

木はグラフの一種であり、実世界だけではなく、コンピュータの世界でも広く利用されている。  
逆ポーランド記法も、バックトラック法も、木で表現できる

## 木で使われる用語

グラフの一種なので、グラフの要素とほぼ同じ
- ノード(node): 丸で表される部分であり、==節==、節点、頂点(vertex)と呼ばれることもある  
    各ノードには名前をつけて識別する。
- ラベル(label): ノードに値を持たせる値のこと
- エッジ(edge): ノード間の連結関係を表し、==枝==や辺と呼ばれることもある
- 根(root): 木の最上層のノードのこと

木の階層関係は、「親(parent)」と「子(child)」で表現する。  
ノードは1つの親しか持てないが、根は例外で親を持たない。  
ノードは任意の個数(0個でも構いません)の子を持てる。
- 外部ノード(external node): 子を持たないノードのこと。==葉(leaf)==と呼ばれることが多い
- 内部ノード(internal node): 葉ではないノードのこと

あるノードの子を根とする木を(元の木の)部分木(subtree)という  
同じ親を持つノード同士を兄弟(sibling)という

### レベル = 根からそのノードまでの距離

- 木の根をレベル0と定義される
- 子に向かって1回辿るごとに、レベルを1ずつ増やす
- 高さ(height): ==根と根から1番遠い葉とのレベルの差==
- 深さ(depth): ==各ノードと根とのレベルの差==

## 木の定義

木は次の2つの規則によって再帰的に定義される構造である
1. 1つのノードは、それ自体が木である。この木に含まれるただ1つのノードが、この木の根である。
2. k個の木T~1~…T~k~があり、それぞれの根をノードn~1~…n~k~とする。  
    ノードnをノードn~1~…n~k~の親にすると、ノードnを根とする新しい木Tが得られる。  
    このとき、木T~1~…T~k~は、木Tの部分木であるという。  
    部分木の根n~1~…n~k~は、ノードnの子であるという。

## 順序木(ordered tree)

同じ親を持つノード同士を兄弟と定義しましたが、兄弟の順序付けを行った木。  
これに対して、兄弟の順序付けを行わない木を無順序木(unordered tree)と呼ぶ。  
一般に使われるデータ構造では、順序木を用いるのが典型的である。  
順序木で兄弟を順序付けする場合、左に位置するノードを長子として、右にあればあるほど年下と見なすのが一般的である。

## 二分木(binary tree)

1. 空の木は二分木である
2. 次のいずれかの条件を満たすノードのみからなる木は、二分木である
    - 子を持たない
    - 左の子のみを持つ
    - 右の子のみを持つ
    - 左右2個の子を持つ

二分木ではノードは高々2個の子しか持たない。  
また、子が1個の場合、左の子か右の子かを区別する。
- 左部分木: 左の子を根とする部分木
- 右部分木: 右の子を根とする部分木

### いろんな二分木

- 全二分木(full binary tree)  
    二分木の中で、全てのノードが葉であるか、または2つの子を持っているもの
- 完全二分木(complete binary tree)  
    狭義の完全二分木。全ての葉が同じ「深さ」を持ち、全ての内部ノードが2つの子を持っているような二分木  
    n個のノードを持つ完全二分木の高さは一般に、「log~2~ n」で表される
- ほとんど完全二分木(almost complete binary tree)  
    広義の完全二分木。優先的にレベルの小さいノードかつ左側のノードに子を配置した二分木

## 木のなぞり

木構造を利用するアルゴリズムは多数ありますが、その中でもよく利用される操作になぞり(traverse)がある。  
木のなぞりとは「木のノードを系統的に全て調べて、各ノードに1回だけ立ち寄るようにする」という操作である。
1. 行きがけ順 (preorder):  ノード → 左部分木 → 右部分木
2. 通りがけ順 (inorder):  左部分木 → ノード → 右部分木
3. 帰りがけ順 (postorder):  左部分木 → 右部分木 → ノード

## 数式の木

(a+b)×(c−d)という数式を木で表すと
1. 前置記法(prefix notation): ×+ab-cd
2. 後置記法(postfix notation): ab+cd-×  
    逆ポーランド記法(reverse polish notation)とも呼ばれる

## 木の実現

二分木と違って、普通の木ではノードが任意個の子を持つので、任意個の子を管理するために、連結リストを用いることになる。
