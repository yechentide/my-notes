# 関数

## 関数の表し方

関数名を書いて、()内は引数ラベルと`:`を交互に並べる  
`abs(_:)` `func01(_:_:)` `func02(a:b:)`

## 関数定義

1. 引数なし
    ```swift
    func 関数名() -> 戻り値の型 {
        // ...
        return 戻り値
    }
    ```
2. 戻り値なし（書き方は３通り）
    ```swift
    func 関数名() { /*----------*/ }
    func 関数名() -> Void { /*----------*/ }
    func 関数名() -> () { /*----------*/ }
    ```
3. return省略
    ```swift
    func 関数名() -> String { "aaaaaaa" }
    ```
4. 引数あり
    ```swift
    func 関数名(引数:型, 引数:型, ...) -> 戻り値の型 {
        // ...
        return 戻り値
    }
    ```
5. 引数ラベルの指定  
    関数を呼び出す際に、仮引数をラベルとして使うのだが、  
    別に指定する、または省略させることもできる
    ```swift
    // 別に指定
    func 関数名(ラベル 引数:型) -> 戻り値の型 { /*----------*/ }
    let result = 関数名(ラベル: 値)
    // 省略
    func 関数名(_ 引数:型) -> 戻り値の型 { /*----------*/ }
    let result = 関数名(値)
    ```
6. デフォルト引数  
    初期値がある引数は、関数を呼び出す際に省略できる  
    その引数より後ろにある、初期値なしの引数には必ずラベルをつける  
    そうでないと、途中の引数だけを省略することができなくなる
    ```swift
    func 関数名(引数:型=値, ...) -> () {}
    ```
7. 可変長引数
    ```swift
    // 型指定の後ろに ... をつける
    func 関数名(配列名:型...) -> () {}

    let result = 関数名(ラベル: 値, 値, 値, ...)
    ```
8. 処理で使われない引数  
    関数の処理で使われないが、引数を設置した場合、仮引数名を`_`にするのが良い
    ```swift
    func 関数名(option _: 型) -> () {}
    ```
9. inout引数  
    普通、実引数をコピーされて関数に渡される。  
    関数内部で実引数を変更したい時、inout引数を使う
    ```swift
    func 関数名(仮引数: inout 型) -> 戻り値の型 { /*----------*/ }

    関数名(ラベル: &実引数)
    ```
10. 関数内で引数を変更  
    普通、渡される引数は定数となる  
    関数内で変更したい時、同じ名前の変数を宣言し、それに代入すれば良い  
    ただ、この変数を変えても、元の日引数には影響できない
    ```swift
    func 関数名(num:Int){
        var num = num
    }
    ```
11. 戻り値を使わない場合  
    本当に値を使う必要がないなら、`_`に代入すれば良い  
    たまに必要で、ほとんどは無視する場合、関数定義の前に属性を指定する  
    こうすれば、戻り値を使わなくても、警告が出ない
    ```swift
    @discardableResult
    func 関数名() -> 戻り値の型 { /*----------*/ }
    ```
12. 関数のネスト  
    ネストした関数は、自分の外部関数の変数をアクセスできる
    ```swift
    func 関数名() -> 戻り値の型 {
        func 関数名() -> 戻り値の型 { /*----------*/ }
        func 関数名() -> 戻り値の型 { /*----------*/ }
    }
    ```
13. 関数の多重定義（オーバーロード）  
    ==引数ラベル名==、引数の個数、引数の型、戻り値の型が違うと別の関数として扱われる
14. 複数の戻り値がある関数（タプルを利用）
    ```swift
    // 戻りのタプルには、値の型と同時に、ラベルを指定できる
    func 関数名() -> (戻り値の型, 戻り値の型,){
        // ...
        return (値, 値)
    }
    func 関数名() -> (ラベル1:戻り値の型, ラベル2:戻り値の型,){
        // ...
        return (値, 値)
    }
    print("\(関数名().ラベル1)")
    ```
15. 引数に関数を使う
    ```swift
    func hasAnyMatches(list: [Int], condition: (Int) -> Bool) -> Bool {
        for item in list {
            if condition(item) {
                return true
            }
        }
        return false
    }
    func lessThanTen(number: Int) -> Bool {
        return number < 10
    }
    var numbers = [20, 19, 7, 12]
    hasAnyMatches(list: numbers, condition: lessThanTen)
    ```
16. 戻り値に関数を使う
    ```swift
    func makeIncrementer() -> ((Int) -> Int) {
        func addOne(number: Int) -> Int {
            return 1 + number
        }
        return addOne
    }
    var increment = makeIncrementer()
    increment(7)
    ```

## 抜ける前に実行される処理

defer文を定義すれば、関数を抜ける前に必ず実行される  
中断処理やエラーハンドリング処理などで有効  
一つの関数内で複数のdefer文を定義できる  
後から定義したものから順に実行される
```swift
func half(num:Double) {
    // 最後に必ず実行する
    defer {
        print("計算終了")
    }
    // 中断処理
    guard num>=0 else {return}
    let halfNum = num/2
    print("\(num)の半分は\(halfNum)")
}
```

## 外部引数名をつける

1. 引数に外部引数名をつける
    ```swift
    func 関数名(外部引数名 引数:型) -> () {}

    関数名(外部引数名: 値)
    ```
2. 呼び出す際に引数名を省略する
    ```swift
    func 関数名(_ 引数:型) -> () {}

    関数名(値)
    ```
